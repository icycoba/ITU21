<!DOCTYPE html>
<html>
    <head>
        <title>Rezervační systém</title>
        <link href="../css/style.css" rel="stylesheet"/>    
        <link href="../css/post-login.css" rel="stylesheet">
        <link href="../css/create_service.css" rel="stylesheet">
        <link rel="shortcut icon" type="image/x-icon" href="images/temp_image.png">
    </head>

    <body>
        <div class="main">
            <div class="nav-links">
                <a href="index-post.html"><img src="../images/temp_image.png" id="logo"></a>
                <ul>
                    <li>
                        <div class="dropdown">
                            <buttom onclick="showMenu()" class="menu"><img src="../images/menu.png" id="menuPic"></buttom>
                            <div class="dropdownctnt" id="myDropdown">
                                <a href="welcome.html">Úvodní stránka</a>
                                <a href="create_service.html">Vytvořit službu</a>
                                <a href="search-post.html">Vyhledávání služby</a>
                                <a href="main_page.html">Kalendář</a>
                                <a href="index.html">Odhlásit se</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="newService">
                <form onsubmit="return createService();">
                    <label for="name">Název:</label><br>
                    <input type="text" id="name" name="name"><br>
                    <label for="description">Popis:</label><br>
                    <input type="text" id="description" name="description"><br>
                    <label for="image">Fotka:</label>
                    <input type="file" id="image" name="image" accept="image/jpeg, image/png"><br><br>
                    <input type="submit" value="Vytvořit" id="submit">
                </form>
                <script type="text/javascript">alert(document.getElementById("image").files[0].name);</script>
            </div>
        
    </div>
    </body>
    <script src="../script/script.js"></script>
    <script type="text/javascript">
        function createXmlHttpRequestObject(){
                var request;
    
                try{
                    request = new XMLHttpRequest();
                } catch(e){
                    try{
                        request = new ActiveXObject("Microsoft.XMLHttp");
                    } catch(e){
                        // ignore err
                    }
                }
    
                if (!request){
                    alert("Nepodařilo se vytvořit XMLHttpRequest.");
                } else{
                    return request;
                }
            }

        function createService(){
            try{
                var request = createXmlHttpRequestObject();

                request.open("POST", "http://localhost:8080/search", true);
                request.setRequestHeader("Content-Type", "application/json; charset=utf-8");

                request.onreadystatechange = function(){
                    if((request.readyState == 4) && (request.status == 200)){
                        console.log("success");
                    }
                }

                var name = document.getElementById('name').value;
                var desc = document.getElementById('description').value;
                var image = document.getElementById("image").files[0].name;

                var data = JSON.stringify({"name": name, "desc": desc, "imagesrc": image})
                request.send(data);

            }                
            catch(e){
                
                alert(e.toString());
            }
            return false;
        }
        
    </script>
</html>